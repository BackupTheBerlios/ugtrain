warzone2100

# Warzone 2100 - Version 2.3.8, Ubuntu 12.04, 32-bit
#
# $ ugtrain -P libmemhack32.so examples/warzone2100_238-32


# Found the body points of an own MG Viper droid with scanmem
# by using 'snapshot', shooting at it, using '<' and '='.
# Found out that it has 205 body points initially.
#
# The game starts with 47 droids of which only 7 are our
# own droids. The memory object dump ('>' key during run)
# and the tool 'ugsimfind' are very useful here.

dynmemstart Droid 876 0x813ce6a 0x4

# Increase the maximum body points
DMaxBody 0x1c0 u16 l 2000 1,9 a
check 0x1c0 u16 g 2
check 0x50 u16 g 2
# Player ID 0 droid? (The AI has 6 and 7 in level 1.)
checko 0x34 u8 l 1

# Read the max. 'body' value from 'originalBody' value
# to avoid nasty assert failed messages.
DBody 0x50 u16 l 0x1c0 1,9 a
check 0x50 u16 g 2

# Experience: From zero to hero
Kills 0x1c4 f32 l 1024.0 2,9 a
check 0x50 u16 g 2
# Player ID 0 droid?
checko 0x34 u8 l 1

# Droids must be fast! Pimp my ride!
Weight 0x1b8 u32 g 2000 3,9 a
check 0x50 u16 g 2
# Player ID 0 droid?
checko 0x34 u8 l 1

Speed 0x1bc u32 l 1000 3,9 a
check 0x50 u16 g 2

dynmemend


# Found the body points of the command station with scanmem
# by using 'snapshot', shooting at it, using '<' and '='.
# Found out that it has 500 body points initially.

dynmemstart Structure 296 0x813d90a 0x4

# Make structures indestructible
SBody 0x50 u16 l 2000 4,9 a
check 0x50 u16 g 2
# Player ID 0 structure?
checko 0x34 u8 l 1

# Building structures lasts too long. Make it faster!
SBuild 0xb2 u16 l 500 5,9 a
check 0x50 u16 g 2
# Player ID 0 structure?
checko 0x34 u8 l 1

HeapPtr 0xbc u32 watch

dynmemend


# Adaption
adapt_script adapt/warzone2100_adapt32.sh
adapt_required 1


# Looks like we have some static values here.
# Note: We can't adapt these, yet. Do discovery for them!

Power 0x8aa24c0 i32 l 5000 6 d
check 0x8aa24c0 i32 g 10

# Cheaters don't like to be accused to be one. ;-)
Cheated 0x8534b40 u8 g 0 7 d
DebugEn 0x8598d80 u8 l 1 8 d


# The bools are easy to discover:
# 0. run the game and "scanmem"
# 1. start a new campaign
# 2. search for 0
# 3. activate cheats
# 4. use a cheat
# 5. search for 1
# 6. jump to step 1 until two matches are found

# real variable names in the game source:
# Cheated: Cheated, src/cheat.cpp
# DebugEn: bDoingDebugMappings, src/keymap.cpp
# Power: asPower[0].currentPower, src/power.cpp

# The currentPower is an i64 fixed point value with 32 bit before the
# point and 32 bit after it. We were lucky to find it as i32 this way.
# For ugtrain only these 32 bit count.

# Please read examples/README for the syntax description
